import{r as e,E as t,F as r,G as s,I as o,bI as a,aS as n,bh as i,bi as l,a$ as c,b3 as g,w as p,bJ as d,bK as u,bg as m}from"./index-a09fe141.js";import{a as f}from"./index-7bfc5be7.js";const v=e.createContext({}),b=e=>{const{antCls:t,componentCls:r,iconCls:a,avatarBg:n,avatarColor:i,containerSize:l,containerSizeLG:c,containerSizeSM:g,textFontSize:p,textFontSizeLG:d,textFontSizeSM:u,borderRadius:m,borderRadiusLG:f,borderRadiusSM:v,lineWidth:b,lineType:h}=e,S=(e,t,s)=>({width:e,height:e,borderRadius:"50%",[`&${r}-square`]:{borderRadius:s},[`&${r}-icon`]:{fontSize:t,[`> ${a}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},s(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:n,border:`${o(b)} ${h} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),S(l,p,m)),{"&-lg":Object.assign({},S(c,d,f)),"&-sm":Object.assign({},S(g,u,v)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},h=e=>{const{componentCls:t,groupBorderColor:r,groupOverlapping:s,groupSpace:o}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:s}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:o}}}},S=t("Avatar",(e=>{const{colorTextLightSolid:t,colorTextPlaceholder:s}=e,o=r(e,{avatarBg:s,avatarColor:t});return[b(o),h(o)]}),(e=>{const{controlHeight:t,controlHeightLG:r,controlHeightSM:s,fontSize:o,fontSizeLG:a,fontSizeXL:n,fontSizeHeading3:i,marginXS:l,marginXXS:c,colorBorderBg:g}=e;return{containerSize:t,containerSizeLG:r,containerSizeSM:s,textFontSize:Math.round((a+n)/2),textFontSizeLG:i,textFontSizeSM:o,groupSpace:c,groupOverlapping:-l,groupBorderColor:g}}));var y=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]])}return r};const x=(t,r)=>{const[s,o]=e.useState(1),[u,m]=e.useState(!1),[f,b]=e.useState(!0),h=e.useRef(null),x=e.useRef(null),O=a(r,h),{getPrefixCls:z,avatar:j}=e.useContext(n),C=e.useContext(v),$=()=>{if(!x.current||!h.current)return;const e=x.current.offsetWidth,r=h.current.offsetWidth;if(0!==e&&0!==r){const{gap:s=4}=t;2*s<r&&o(r-2*s<e?(r-2*s)/e:1)}};e.useEffect((()=>{m(!0)}),[]),e.useEffect((()=>{b(!0),o(1)}),[t.src]),e.useEffect($,[t.gap]);const E=()=>{const{onError:e}=t;!1!==(null==e?void 0:e())&&b(!1)},{prefixCls:N,shape:w,size:k,src:P,srcSet:G,icon:L,className:M,rootClassName:R,alt:T,draggable:F,children:B,crossOrigin:I}=t,H=y(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),A=i((e=>{var t,r;return null!==(r=null!==(t=null!=k?k:null==C?void 0:C.size)&&void 0!==t?t:e)&&void 0!==r?r:"default"})),W=Object.keys("object"==typeof A&&A||{}).some((e=>["xs","sm","md","lg","xl","xxl"].includes(e))),X=l(W),_=e.useMemo((()=>{if("object"!=typeof A)return{};const e=c.find((e=>X[e])),t=A[e];return t?{width:t,height:t,fontSize:t&&(L||B)?t/2:18}:{}}),[X,A]),q=z("avatar",N),J=g(q),[K,V,D]=S(q,J),Q=p({[`${q}-lg`]:"large"===A,[`${q}-sm`]:"small"===A}),U=e.isValidElement(P),Y=w||(null==C?void 0:C.shape)||"circle",Z=p(q,Q,null==j?void 0:j.className,`${q}-${Y}`,{[`${q}-image`]:U||P&&f,[`${q}-icon`]:!!L},D,J,M,R,V),ee="number"==typeof A?{width:A,height:A,fontSize:L?A/2:18}:{};let te;if("string"==typeof P&&f)te=e.createElement("img",{src:P,draggable:F,srcSet:G,onError:E,alt:T,crossOrigin:I});else if(U)te=P;else if(L)te=L;else if(u||1!==s){const t=`scale(${s})`,r={msTransform:t,WebkitTransform:t,transform:t};te=e.createElement(d,{onResize:$},e.createElement("span",{className:`${q}-string`,ref:x,style:Object.assign({},r)},B))}else te=e.createElement("span",{className:`${q}-string`,style:{opacity:0},ref:x},B);return delete H.onError,delete H.gap,K(e.createElement("span",Object.assign({},H,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee),_),null==j?void 0:j.style),H.style),className:Z,ref:O}),te))},O=e.forwardRef(x),z=t=>{const{size:r,shape:s}=e.useContext(v),o=e.useMemo((()=>({size:t.size||r,shape:t.shape||s})),[t.size,t.shape,r,s]);return e.createElement(v.Provider,{value:o},t.children)},j=t=>{var r,s,o;const{getPrefixCls:a,direction:i}=e.useContext(n),{prefixCls:l,className:c,rootClassName:d,style:v,maxCount:b,maxStyle:h,size:y,shape:x,maxPopoverPlacement:j,maxPopoverTrigger:C,children:$,max:E}=t,N=a("avatar",l),w=`${N}-group`,k=g(N),[P,G,L]=S(N,k),M=p(w,{[`${w}-rtl`]:"rtl"===i},L,k,c,d,G),R=u($).map(((e,t)=>m(e,{key:`avatar-key-${t}`}))),T=(null==E?void 0:E.count)||b,F=R.length;if(T&&T<F){const t=R.slice(0,T),a=R.slice(T,F),n=(null==E?void 0:E.style)||h,i=(null===(r=null==E?void 0:E.popover)||void 0===r?void 0:r.trigger)||C||"hover",l=(null===(s=null==E?void 0:E.popover)||void 0===s?void 0:s.placement)||j||"top",c=Object.assign(Object.assign({content:a},null==E?void 0:E.popover),{overlayClassName:p(`${w}-popover`,null===(o=null==E?void 0:E.popover)||void 0===o?void 0:o.overlayClassName),placement:l,trigger:i});return t.push(e.createElement(f,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},c),e.createElement(O,{style:n},"+"+(F-T)))),P(e.createElement(z,{shape:x,size:y},e.createElement("div",{className:M,style:v},t)))}return P(e.createElement(z,{shape:x,size:y},e.createElement("div",{className:M,style:v},R)))},C=O;C.Group=j;const $=C;export{$ as A};
