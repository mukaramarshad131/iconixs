import{r as e,az as s,aA as a,aB as n,U as t,aq as r,j as i,a6 as l,a3 as o,B as c,P as d,a5 as u,q as x}from"./index-a09fe141.js";import{D as m,K as p,T as f}from"./kanban-task-a0e1181f.js";import{I as j}from"./index-74b431e6.js";var h=n?window:null,g=function(e){return!!e.addEventListener},b=function(e){return!!e.on};const k=function(n,t,r,i){void 0===r&&(r=h),e.useEffect((function(){if(t&&r)return g(r)?s(r,n,t,i):b(r)&&r.on(n,t,i),function(){g(r)?a(r,n,t,i):b(r)&&r.off(n,t,i)}}),[n,t,r,JSON.stringify(i)])};function y({index:s,column:a,tasks:n,createTask:h,clearColumn:g,deleteColumn:b,renameColumn:y}){const{themeMode:v}=t(),N={height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:v===r.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)"},C=[{key:"1",label:i.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{T(!0)},children:[i.jsx(d,{icon:"solar:pen-bold"}),i.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:i.jsxs("div",{className:"flex items-center text-gray",onClick:()=>g(a.id),children:[i.jsx(d,{icon:"solar:eraser-bold"}),i.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:i.jsxs("div",{className:"flex items-center text-warning",onClick:()=>b(a.id),children:[i.jsx(d,{icon:"solar:trash-bin-trash-bold"}),i.jsx("span",{className:"ml-2",children:"delete"})]})}],[P,S]=e.useState(!1),z=e.useRef(null);k("click",(e=>{if(z.current&&!z.current.input?.contains(e.target)){const e=z.current.input?.value;e&&h(a.id,{id:x.string.uuid(),title:e,reporter:x.image.avatarGitHub(),priority:x.helpers.enumValue(f)}),S(!1)}if(w.current&&!w.current.input?.contains(e.target)){const e=w.current.input?.value;e&&y({...a,title:e}),T(!1)}}));const[R,T]=e.useState(!1),w=e.useRef(null),[O,_]=e.useState(!1),A=e=>{_(!1),e.domEvent.stopPropagation()};return i.jsx(l,{draggableId:a.id,index:s,children:e=>i.jsx("div",{ref:e.innerRef,...e.draggableProps,children:i.jsxs("div",{style:N,children:[i.jsxs("header",{...e.dragHandleProps,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[R?i.jsx(j,{ref:w,size:"large",autoFocus:!0}):a.title,i.jsx(o,{open:O,onOpenChange:e=>_(e),menu:{items:C,onClick:A},placement:"bottomRight",trigger:["click"],children:i.jsx(c,{shape:"circle",type:"text",className:"!text-gray",children:i.jsx(d,{icon:"dashicons:ellipsis"})})})]}),i.jsx(u,{droppableId:a.id,type:m.TASK,children:e=>i.jsxs("main",{ref:e.innerRef,...e.droppableProps,className:"min-h-[10px]",children:[n.map(((e,s)=>i.jsx(p,{task:e,index:s},e.id))),e.placeholder]})}),i.jsx("footer",{className:"w-[248px]",children:P?i.jsx(j,{ref:z,size:"large",placeholder:"Task Name",autoFocus:!0}):i.jsxs(c,{onClick:e=>{e.stopPropagation(),S(!0)},className:"!flex items-center justify-center !text-xs !font-medium",type:"text",block:!0,size:"large",children:[i.jsx(d,{icon:"carbon:add",size:20}),i.jsx("span",{children:"Add Task"})]})})]})})})}const v=Object.freeze(Object.defineProperty({__proto__:null,default:y},Symbol.toStringTag,{value:"Module"}));export{y as K,v as k,k as u};
