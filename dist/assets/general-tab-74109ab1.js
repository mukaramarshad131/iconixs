import{i as e,k as s,r as i,b as r,a,c as l,R as n,j as t,B as o}from"./index-a09fe141.js";import{C as d}from"./index-50a70862.js";import{d as m,U as c,a as u,b as h}from"./query-8c0888dc.js";import{R as p,C as j}from"./row-ec866866.js";import{F as g}from"./index-cbfb1e1e.js";import{I as x}from"./index-74b431e6.js";import{D as y}from"./index-7394488d.js";import{R as f}from"./index-6fe50528.js";import{u as b}from"./useQuery-dd61d617.js";import{u as _}from"./useMutation-0321b2fb.js";import"./EyeOutlined-4d65de98.js";import"./SearchOutlined-03807928.js";import"./dayjs.min-aa5ebecd.js";import"./useIcons-3bc6d994.js";import"./index-d00d9c03.js";function v(){const{notification:v}=e.useApp(),{t:I}=s(),[q,P]=i.useState(!1),{setUserInfo:w}=r(),S=a(),N=l(),{data:z}=b(m,{variables:{custom_module_form_id:"1524146",user_id:N.id,filler_id:N.id}}),{loading:C,data:M}=b(c,{variables:{id:N.id}}),[F]=_(u),[O]=_(h);i.useEffect((()=>{if(z?.formAnswerGroups?.length>0&&N?.permissions&&N.permissions[0]?.children?.some((e=>"sys.menu.packages"!==e.label))){const e=N?.permissions[0]?.children.some((e=>"sys.menu.packages"===e.label))?[]:[n],s=N.permissions.map(((s,i)=>0===i?{...s,children:[...s.children,...e]}:s)),i={...N,permissions:s};JSON.stringify(N.permissions)!==JSON.stringify(s)&&w(i),localStorage.setItem("redirect","")}}),[z,N,w,S]);const D={first_name:M?.user.first_name,last_name:M?.user.last_name,email:M?.user.email,phone_number:M?.user.phone_number,gender:M?.user.gender,height:M?.user.height,city:M?.user?.location?.city,weight:M?.user?.weight,zip:M?.user?.location?.zip,state:M?.user?.location?.state,country:M?.user?.location?.country,line1:M?.user?.location?.line1};return t.jsx(p,{gutter:[16,16],children:t.jsx(j,{span:24,lg:24,children:!C&&t.jsx(d,{children:t.jsxs(g,{layout:"vertical",initialValues:{...D},labelCol:{span:8},className:"w-full",onFinish:async e=>{const s={...e,role:"patient",next_appt_date:null,provider_type:"openloop",dietitian_id:"1322376"},i={input:{id:N.id,dietitian_id:"1322376",dob:s.dob.toString().split(",")[1].slice(0,-12),first_name:s.first_name,last_name:s.last_name,height:`${s.height}`,phone_number:s.phone,additional_record_identifier:"",gender:s.gender,location:{state:s.state,city:s.city,zip:s.zip,line1:s.line1,line2:"ria zee",country:s?.country}}};P(!0);try{const e={category:"Weight",type:"MetricEntry",metric_stat:s.weight,user_id:N.id,created_at:"1/7/2024"};await F({variables:{...i}}),await O({variables:{...e}}),v.success({message:"Update success!",duration:3})}finally{P(!1)}},children:[t.jsxs(p,{gutter:16,children:[t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"First Name",name:"first_name",rules:[{required:!0,message:I("sys.login.firstNamePlaceholder")}],children:t.jsx(x,{value:D.first_name})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Last Name",name:"last_name",rules:[{required:!0,message:I("sys.login.lastNamePlaceholder")}],children:t.jsx(x,{value:D.last_name})})})]}),t.jsxs(p,{gutter:16,children:[t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Email:",name:"email",rules:[{required:!0,type:"email",message:I("sys.login.emaildPlaceholder")}],children:t.jsx(x,{value:D.email})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Phone",name:"phone_number",rules:[{required:!0,message:I("sys.login.mobilePlaceholder")}],children:t.jsx(x,{value:D.phone_number})})})]}),t.jsxs(p,{gutter:16,children:[t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Date of Birth:",name:"dob",rules:[{required:!0,message:I("sys.login.dobPlaceholder")}],children:t.jsx(y,{format:"DD/MM/YYYY"})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Gender",name:"gender",rules:[{required:!0,message:I("sys.login.genderPlaceholder")}],children:t.jsxs(f.Group,{defaultValue:D.gender,children:[t.jsx(f,{value:"Female",children:" Female "}),t.jsx(f,{value:"Male",children:" Male "})]})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Height",name:"height",rules:[{required:!0,message:I("sys.login.heightPlaceholder")}],children:t.jsx(x,{name:"height",value:D.height})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Weight",name:"weight",rules:[{required:!0,message:I("sys.login.weightPlaceholder")}],children:t.jsx(x,{value:D.weight})})})]}),t.jsxs(p,{gutter:16,children:[t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Street:",name:"line1",rules:[{required:!0,message:I("sys.login.streetPlaceholder")}],children:t.jsx(x,{value:D.line1})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"City:",name:"city",rules:[{required:!0,message:I("sys.login.cityPlaceholder")}],children:t.jsx(x,{value:D.city})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"State:",name:"state",rules:[{required:!0,message:I("sys.login.statePlaceholder")}],children:t.jsx(x,{value:D.state})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Zip Code:",name:"zip",rules:[{required:!0,message:I("sys.login.zipPlaceholder")}],children:t.jsx(x,{value:D.zip})})}),t.jsx(j,{span:12,children:t.jsx(g.Item,{label:"Country:",name:"country",rules:[{required:!0,message:I("sys.login.countryPlaceholder")}],children:t.jsx(x,{value:D.country})})})]}),t.jsx(g.Item,{children:t.jsx(o,{type:"primary",htmlType:"submit",className:"w-full",loading:q,children:"Submit"})})]})})})})}export{v as default};
