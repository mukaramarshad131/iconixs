import{i as e,k as s,l as a,b as r,r as i,n as t,o as n,j as o,D as l,B as m,p as d}from"./index-a09fe141.js";import{r as c,U as u}from"./utils-437e76a7.js";import{L as p,U as x,O as j}from"./query-8c0888dc.js";import{F as f}from"./index-cbfb1e1e.js";import{I as h}from"./index-74b431e6.js";import{R as g,C as y}from"./row-ec866866.js";import{C as P}from"./index-d407338b.js";import{u as I}from"./useMutation-0321b2fb.js";import{u as T}from"./useQuery-dd61d617.js";import"./EyeOutlined-4d65de98.js";import"./SearchOutlined-03807928.js";import"./index-d00d9c03.js";import"./index-b9825768.js";const{VITE_APP_HOMEPAGE:E}={VITE_GLOB_APP_TITLE:"Vite React TS Template",VITE_APP_BASE_API:"/api",VITE_APP_HOMEPAGE:"/dashboard/patientDetails",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function _(){const{notification:_}=e.useApp(),{t:b}=s(),A=a(),{setUserToken:w,setUserInfo:S,setUserPlan:N}=r(),[v,O]=i.useState(!1),{loginState:R,setLoginState:k}=t(),[L]=I(p),{data:V}=T(x,{variables:{id:"1412694"}}),{data:U}=T(j,{variables:{id:"1412694"}});if(R!==n.LOGIN)return null;return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 text-2xl font-bold xl:text-3xl",children:b("sys.login.signInFormTitle")}),void 0,void 0,o.jsxs(f,{name:"login",size:"large",initialValues:{remember:!0,username:l.username,password:l.password},onFinish:async({username:e,password:s})=>{O(!0);try{const a={email:e,password:s,tokenAPI:!0,multipleAPI:!0,dietitian_id:"1322376"},r="387f3e57-9c4b-46a3-bd66-cbac6a60aad2",i="1c4eff0e-15cc-4d12-95a1-7a29df87df0e",t={avatar:"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/297.jpg",createdAt:"2023-12-28T06:33:44.883Z",updatedAt:"2024-08-06T14:47:47.014Z",password:"@Junaid@2024",role:c,permissions:u()},{data:{signIn:n}}=await L({variables:{...a}});if(n?.messages?.length>0)return _.error({message:n.messages[0].message,duration:3}),0;if(n?.user){const e={...t,...n.user,username:`${n.user.first_name} ${n.user.last_name}`,firstName:n.user.first_name,lastName:n.user.last_name,phoneNumber:n.user.phone_number,city:n.user?.location?.city,line1:n.user?.location?.line1,line2:n.user?.location?.line2,state:n.user?.location?.state,zip:n.user?.location?.zip,country:n.user?.location?.country};w({accessToken:r,refreshToken:i}),N({planId:"ico-trt-cypionate-inj"}),S(e),A(E,{replace:!0})}}finally{O(!1)}},children:[o.jsx(f.Item,{name:"username",rules:[{required:!0,message:b("sys.login.emaildPlaceholder")}],children:o.jsx(h,{type:"email",placeholder:b("sys.login.email")})}),o.jsx(f.Item,{name:"password",rules:[{required:!0,message:b("sys.login.passwordPlaceholder")}],children:o.jsx(h.Password,{type:"password",placeholder:b("sys.login.password")})}),o.jsx(f.Item,{children:o.jsxs(g,{children:[o.jsx(y,{span:12,children:o.jsx(f.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:o.jsx(P,{children:b("sys.login.rememberMe")})})}),o.jsx(y,{span:12,className:"text-right",children:o.jsx("button",{className:"!underline",onClick:()=>k(n.RESET_PASSWORD),children:b("sys.login.forgetPassword")})})]})}),o.jsx(f.Item,{children:o.jsx(m,{type:"primary",htmlType:"submit",className:"w-full",loading:v,children:b("sys.login.loginButton")})}),o.jsx(d,{className:"!text-xs",children:o.jsx("div",{onClick:()=>k(n.REGISTER),children:o.jsx(m,{className:"w-full !text-sm",children:b("sys.login.signUpFormTitle")})})})]})]})}export{_ as default};
