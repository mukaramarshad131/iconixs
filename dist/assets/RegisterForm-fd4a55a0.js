import{k as e,i as s,r,n as i,o as a,j as l,B as t}from"./index-a09fe141.js";import{S as n,a as o,b as d}from"./query-8c0888dc.js";import{ReturnButton as m}from"./ReturnButton-e0d1f4f4.js";import{F as c}from"./index-cbfb1e1e.js";import{R as h,C as p}from"./row-ec866866.js";import{I as g}from"./index-74b431e6.js";import{D as x}from"./index-7394488d.js";import{R as j}from"./index-6fe50528.js";import{u}from"./useMutation-0321b2fb.js";import"./EyeOutlined-4d65de98.js";import"./SearchOutlined-03807928.js";import"./dayjs.min-aa5ebecd.js";import"./useIcons-3bc6d994.js";import"./index-d00d9c03.js";function y(){const{t:y}=e(),{notification:f}=s.useApp(),[P]=u(n),[w]=u(o),[b]=u(d),[I,_]=r.useState(!1),{loginState:v,backToLogin:q}=i();if(v!==a.REGISTER)return null;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 text-2xl font-bold xl:text-3xl",children:y("sys.login.signUpFormTitle")}),l.jsxs(c,{name:"normal_login",size:"large",initialValues:{remember:!0},onFinish:async e=>{const s={...e,dob:e.dob.format("YYYY-MM-DD"),role:"patient",next_appt_date:null,provider_type:"openloop",dietitian_id:"1322376"};_(!0);try{const{data:{signUp:{user:e,messages:r=[]}}}=await P({variables:{...s}});if(r?.length>0)return f.error({message:r[0].message,duration:3}),0;if(e?.id){const r={input:{id:e.id,dietitian_id:"1322376",dob:s.dob,height:s.height,phone_number:s.phone,additional_record_identifier:"",gender:s.gender,location:{state:"IA",city:"Des Moines",zip:"50309",line1:s.address,line2:"ria zee"}}},i={category:"Weight",type:"MetricEntry",metric_stat:s.metric_stat,user_id:e.id,created_at:"1/7/2024"};await w({variables:{...r}}),await b({variables:{...i}})}f.success({message:"Update success!",duration:3}),q()}finally{_(!1)}},children:[l.jsxs(h,{gutter:16,children:[l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"first_name",rules:[{required:!0,message:y("sys.login.firstNamePlaceholder")}],children:l.jsx(g,{placeholder:"Enter First Name"})})}),l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"last_name",rules:[{required:!0,message:y("sys.login.lastNamePlaceholder")}],children:l.jsx(g,{placeholder:"Enter Last Name"})})})]}),l.jsx(c.Item,{name:"email",rules:[{required:!0,type:"email",message:y("sys.login.emaildPlaceholder")}],children:l.jsx(g,{placeholder:y("sys.login.email")})}),l.jsx(c.Item,{name:"dob",rules:[{required:!0,message:y("sys.login.dobPlaceholder")}],children:l.jsx(x,{placeholder:"Date of Birth",format:"YYYY-MM-DD",style:{width:"100%"}})}),l.jsx(c.Item,{name:"gender",rules:[{required:!0,message:y("sys.login.genderPlaceholder")}],children:l.jsxs(j.Group,{children:[l.jsx(j,{value:"Female",children:" Female "}),l.jsx(j,{value:"Male",children:" Male "})]})}),l.jsxs(h,{gutter:16,children:[l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"height",rules:[{required:!0,message:y("sys.login.heightPlaceholder")}],children:l.jsx(g,{placeholder:"Height"})})}),l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"metric_stat",rules:[{required:!0,message:y("sys.login.weightPlaceholder")}],children:l.jsx(g,{placeholder:"Weight"})})})]}),l.jsxs(h,{gutter:16,children:[l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"address",rules:[{required:!0,message:y("sys.login.addressPlaceholder")}],children:l.jsx(g,{placeholder:"Address"})})}),l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"phone",rules:[{required:!0,message:y("sys.login.mobilePlaceholder")}],children:l.jsx(g,{placeholder:"Phone Number"})})})]}),l.jsxs(h,{gutter:16,children:[l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"password",rules:[{required:!0},{validator:(e,s)=>{const r=/[A-Z]/.test(s),i=/[a-z]/.test(s),a=/[0-9]/.test(s),l=/[^a-zA-Z0-9 ]/.test(s);return r&&i&&a&&l?Promise.resolve():Promise.reject(y("sys.login.passwordComplexity"))}}],children:l.jsx(g.Password,{type:"password",placeholder:y("sys.login.password")})})}),l.jsx(p,{span:12,children:l.jsx(c.Item,{name:"confirmPassword",rules:[{required:!0,message:y("sys.login.confirmPasswordPlaceholder")},({getFieldValue:e})=>({validator:(s,r)=>r&&e("password")!==r?Promise.reject(new Error(y("sys.login.diffPwd"))):Promise.resolve()})],children:l.jsx(g.Password,{type:"password",placeholder:y("sys.login.confirmPassword")})})})]}),l.jsx(c.Item,{children:l.jsx(t,{type:"primary",htmlType:"submit",className:"w-full",loading:I,children:y("sys.login.registerButton")})}),l.jsxs("div",{className:"mb-2 text-xs text-gray",children:[l.jsx("span",{children:y("sys.login.registerAndAgree")}),l.jsx("a",{href:"./",className:"text-sm !underline",children:y("sys.login.termsOfService")})," & ",l.jsx("a",{href:"./",className:"text-sm !underline",children:y("sys.login.privacyPolicy")})]}),l.jsx(m,{onClick:q})]})]})}export{y as default};
