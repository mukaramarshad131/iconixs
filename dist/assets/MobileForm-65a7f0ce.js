import{r as e,E as t,F as n,G as s,aS as a,w as r,bM as o,bN as l,bO as i,bg as c,k as m,n as u,o as p,j as d,B as f}from"./index-a09fe141.js";import{ReturnButton as g}from"./ReturnButton-e0d1f4f4.js";import{F as x}from"./index-cbfb1e1e.js";import{I as y}from"./index-74b431e6.js";import{R as b,C as h}from"./row-ec866866.js";import"./EyeOutlined-4d65de98.js";import"./SearchOutlined-03807928.js";const j=t=>{const{value:n,formatter:s,precision:a,decimalSeparator:r,groupSeparator:o="",prefixCls:l}=t;let i;if("function"==typeof s)i=s(n);else{const t=String(n),s=t.match(/^(-?)(\d*)(\.(\d+))?$/);if(s&&"-"!==t){const t=s[1];let n=s[2]||"0",c=s[4]||"";n=n.replace(/\B(?=(\d{3})+(?!\d))/g,o),"number"==typeof a&&(c=c.padEnd(a,"0").slice(0,a>0?a:0)),c&&(c=`${r}${c}`),i=[e.createElement("span",{key:"int",className:`${l}-content-value-int`},t,n),c&&e.createElement("span",{key:"decimal",className:`${l}-content-value-decimal`},c)]}else i=t}return e.createElement("span",{className:`${l}-content-value`},i)},v=e=>{const{componentCls:t,marginXXS:n,padding:a,colorTextDescription:r,titleFontSize:o,colorTextHeading:l,contentFontSize:i,fontFamily:c}=e;return{[t]:Object.assign(Object.assign({},s(e)),{[`${t}-title`]:{marginBottom:n,color:r,fontSize:o},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:l,fontSize:i,fontFamily:c,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}})}},S=t("Statistic",(e=>{const t=n(e,{});return[v(t)]}),(e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}}));var O=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const N=t=>{const{prefixCls:n,className:s,rootClassName:i,style:c,valueStyle:m,value:u=0,title:p,valueRender:d,prefix:f,suffix:g,loading:x=!1,formatter:y,precision:b,decimalSeparator:h=".",groupSeparator:v=",",onMouseEnter:N,onMouseLeave:E}=t,w=O(t,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:$,direction:C,statistic:F}=e.useContext(a),I=$("statistic",n),[T,M,k]=S(I),P=e.createElement(j,{decimalSeparator:h,groupSeparator:v,prefixCls:I,formatter:y,precision:b,value:u}),z=r(I,{[`${I}-rtl`]:"rtl"===C},null==F?void 0:F.className,s,i,M,k),D=o(w,{aria:!0,data:!0});return T(e.createElement("div",Object.assign({},D,{className:z,style:Object.assign(Object.assign({},null==F?void 0:F.style),c),onMouseEnter:N,onMouseLeave:E}),p&&e.createElement("div",{className:`${I}-title`},p),e.createElement(l,{paragraph:!1,loading:x,className:`${I}-skeleton`},e.createElement("div",{style:m,className:`${I}-content`},f&&e.createElement("span",{className:`${I}-content-prefix`},f),d?d(P):P,g&&e.createElement("span",{className:`${I}-content-suffix`},g)))))},E=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function w(e,t){const{format:n=""}=t,s=new Date(e).getTime(),a=Date.now();return function(e,t){let n=e;const s=/\[[^\]]*]/g,a=(t.match(s)||[]).map((e=>e.slice(1,-1))),r=t.replace(s,"[]"),o=E.reduce(((e,t)=>{let[s,a]=t;if(e.includes(s)){const t=Math.floor(n/a);return n-=t*a,e.replace(new RegExp(`${s}+`,"g"),(e=>{const n=e.length;return t.toString().padStart(n,"0")}))}return e}),r);let l=0;return o.replace(s,(()=>{const e=a[l];return l+=1,e}))}(Math.max(s-a,0),n)}var $=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const C=1e3/30;const F=t=>{const{value:n,format:s="HH:mm:ss",onChange:a,onFinish:r}=t,o=$(t,["value","format","onChange","onFinish"]),l=i(),m=e.useRef(null),u=()=>{const e=function(e){return new Date(e).getTime()}(n);e>=Date.now()&&(m.current=setInterval((()=>{l(),null==a||a(e-Date.now()),e<Date.now()&&(null==r||r(),m.current&&(clearInterval(m.current),m.current=null))}),C))};e.useEffect((()=>(u(),()=>{m.current&&(clearInterval(m.current),m.current=null)})),[n]);return e.createElement(N,Object.assign({},o,{value:n,valueRender:e=>c(e,{title:void 0}),formatter:(e,t)=>w(e,Object.assign(Object.assign({},t),{format:s}))}))},I=e.memo(F);N.Countdown=I;const{Countdown:T}=N;function M(){const{t:t}=m(),[n,s]=e.useState(0),[a,r]=e.useState(0),{loginState:o,backToLogin:l}=u();if(o!==p.MOBILE)return null;const i=()=>{s(0),r(60)};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mb-4 text-2xl font-bold xl:text-3xl",children:t("sys.login.mobileSignInFormTitle")}),d.jsxs(x,{name:"normal_login",size:"large",initialValues:{remember:!0},onFinish:e=>{},children:[d.jsx(x.Item,{name:"phone",rules:[{required:!0,message:"Please input your Phone!"}],children:d.jsx(y,{placeholder:t("sys.login.mobile")})}),d.jsx(x.Item,{name:"code",rules:[{required:!0,message:t("sys.login.mobilePlaceholder")}],children:d.jsxs(b,{justify:"space-between",children:[d.jsx(h,{span:14,children:d.jsx(y,{placeholder:t("sys.login.smsCode")})}),d.jsx(h,{span:9,flex:1,children:d.jsx(f,{disabled:0!==n,className:"w-full !text-sm",onClick:()=>{s(60),r(60)},children:0===n?d.jsx("span",{children:t("sys.login.sendSmsButton")}):d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx(T,{className:"hidden",value:Date.now()+1e3*n,onChange:e=>{s(Number(e)/1e3),r(Math.floor(Number(e)/1e3))},format:"ss",onFinish:i}),d.jsx("span",{className:"ml-1",children:t("sys.login.sendSmsText",{second:a})})]})})})]})}),d.jsx(x.Item,{children:d.jsx(f,{type:"primary",htmlType:"submit",className:"w-full",children:t("sys.login.loginButton")})}),d.jsx(g,{onClick:()=>{i(),l()}})]})]})}export{M as default};
